{"version":3,"file":"sccMaster.js","sources":["../lib/socketserver/sccMaster.js"],"sourcesContent":["import scHotReboot from 'sc-hot-reboot'\nimport Debug from 'debug'\n\nconst debug = Debug('scc-master:')\ndebug.color = 5\n\nmodule.exports.run = function (socketCluster) {\n    socketCluster.on(socketCluster.EVENT_WORKER_CLUSTER_START, function (workerClusterInfo) {\n        debug('   >> WorkerCluster PID:', workerClusterInfo.pid)\n    })\n\n    if (socketCluster.options.environment == 'dev') {\n        // This will cause SC workers to reboot when code changes anywhere in the app directory.\n        // The second options argument here is passed directly to chokidar.\n        // See https://github.com/paulmillr/chokidar#api for details.\n        debug(`   !! The sc-hot-reboot plugin is watching for code changes in the ${__dirname} directory`)\n        scHotReboot.attach(socketCluster, {\n            cwd: __dirname,\n            ignored: ['public', 'node_modules', 'README.md', 'Dockerfile', 'server.js', 'master.js', 'broker.js', /[\\/\\\\]\\./, '*.log']\n        })\n    }\n}\n"],"names":["debug","Debug","color","module","exports","run","socketCluster","on","EVENT_WORKER_CLUSTER_START","workerClusterInfo","pid","options","environment","__dirname","attach"],"mappings":";;;;;;;;;;;;AAGA,MAAMA,QAAQC,MAAM,aAAN,CAAd;AACAD,MAAME,KAAN,GAAc,CAAd;;AAEAC,OAAOC,OAAP,CAAeC,GAAf,GAAqB,UAAUC,aAAV,EAAyB;kBAC5BC,EAAd,CAAiBD,cAAcE,0BAA/B,EAA2D,UAAUC,iBAAV,EAA6B;cAC9E,0BAAN,EAAkCA,kBAAkBC,GAApD;KADJ;;QAIIJ,cAAcK,OAAd,CAAsBC,WAAtB,IAAqC,KAAzC,EAAgD;;;;cAIrC,sEAAqEC,SAAU,YAAtF;oBACYC,MAAZ,CAAmBR,aAAnB,EAAkC;iBACzBO,SADyB;qBAErB,CAAC,QAAD,EAAW,cAAX,EAA2B,WAA3B,EAAwC,YAAxC,EAAsD,WAAtD,EAAmE,WAAnE,EAAgF,WAAhF,EAA6F,UAA7F,EAAyG,OAAzG;SAFb;;CAVR"}