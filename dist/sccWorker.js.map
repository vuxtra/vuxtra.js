{"version":3,"file":"sccWorker.js","sources":["../node_modules/tapable/lib/Hook.js","../node_modules/tapable/lib/simpleAsyncCases.js","../node_modules/tapable/lib/AsyncParallelHook.js","../lib/vuxtraserver/controllers/controller.js","../node_modules/@vuxtra/shared-core/lib/core/request.js","../node_modules/@vuxtra/shared-core/lib/core/serviceRequest.js","../node_modules/@vuxtra/shared-core/lib/core/response.js","../node_modules/@vuxtra/shared-core/lib/core/serviceResponse.js","../lib/vuxtraserver/controllers/serviceController.js","../lib/vuxtraserver/vuxtraServer.js","../node_modules/nuxt/lib/common/utils.js","../lib/builder/webpack/vuxtraServer.config.js","../lib/builder/index.js","../lib/socketserver/sccWorker.js"],"sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\"use strict\";\r\n\r\nclass Hook {\r\n\tconstructor(args) {\r\n\t\tif(!Array.isArray(args)) args = [];\r\n\t\tthis._args = args;\r\n\t\tthis.taps = [];\r\n\t\tthis.interceptors = [];\r\n\t\tthis.call = this._call = this.createCompileDelegate(\"call\", \"sync\", args);\r\n\t\tthis.promise = this._promise = this.createCompileDelegate(\"promise\", \"promise\", args);\r\n\t\tthis.callAsync = this._callAsync = this.createCompileDelegate(\"callAsync\", \"async\", args.concat(\"_callback\"));\r\n\t\tthis._x = undefined;\r\n\t}\r\n\r\n\tcompile(options) {\r\n\t\tconst source = this.template(options);\r\n\t\treturn new Function(`\"use strict\"; return (${source});`)();\r\n\t}\r\n\r\n\tgetTapType() {\r\n\t\tif(this.interceptors.length > 0) return \"intercept\";\r\n\t\tif(this.taps.length === 0) return \"none\";\r\n\t\tif(this.taps.length === 1) {\r\n\t\t\tconst tap = this.taps[0];\r\n\t\t\treturn tap.type;\r\n\t\t}\r\n\t\tlet type = this.taps[0].type;\r\n\t\tfor(let i = 1; i < this.taps.length; i++) {\r\n\t\t\tconst tap = this.taps[i];\r\n\t\t\tif(tap.type !== type) return \"multiple\";\r\n\t\t}\r\n\t\treturn \"multiple-\" + type;\r\n\t}\r\n\r\n\tcreateCall(type) {\r\n\t\tconst tap = this.getTapType();\r\n\t\tif(tap === \"sync\" || tap === \"async\" || tap === \"promise\")\r\n\t\t\tthis._x = this.taps[0].fn;\r\n\t\telse if(tap === \"multiple-sync\" || tap === \"multiple-async\" || tap === \"multiple-promise\")\r\n\t\t\tthis._x = this.taps.map(t => t.fn);\r\n\t\telse\r\n\t\t\tthis._x = this.taps;\r\n\t\treturn this.compile({\r\n\t\t\targs: this._args,\r\n\t\t\ttap: tap,\r\n\t\t\ttype: type\r\n\t\t});\r\n\t}\r\n\r\n\tcreateCompileDelegate(name, type, args) {\r\n\t\treturn new Function(args, `\r\n\t\t\tthis.${name} = this.createCall(${JSON.stringify(type)});\r\n\t\t\treturn this.${name}(${args.join(\", \")});\r\n\t\t`);\r\n\t}\r\n\r\n\ttap(options, fn) {\r\n\t\tif(typeof options === \"string\")\r\n\t\t\toptions = { name: options };\r\n\t\tif(typeof options !== \"object\" || options === null)\r\n\t\t\tthrow new Error(\"Invalid arguments to tap(options: Object, fn: function)\");\r\n\t\toptions = Object.assign({ type: \"sync\", fn: fn }, options);\r\n\t\tif(typeof options.name !== \"string\" || options.name === \"\")\r\n\t\t\tthrow new Error(\"Missing name for tap\");\r\n\t\tthis._insert(options);\r\n\t}\r\n\r\n\ttapAsync(options, fn) {\r\n\t\tif(typeof options === \"string\")\r\n\t\t\toptions = { name: options };\r\n\t\tif(typeof options !== \"object\" || options === null)\r\n\t\t\tthrow new Error(\"Invalid arguments to tapAsync(options: Object, fn: function)\");\r\n\t\toptions = Object.assign({ type: \"async\", fn: fn }, options);\r\n\t\tif(typeof options.name !== \"string\" || options.name === \"\")\r\n\t\t\tthrow new Error(\"Missing name for tapAsync\");\r\n\t\tthis._insert(options);\r\n\t}\r\n\r\n\ttapPromise(options, fn) {\r\n\t\tif(typeof options === \"string\")\r\n\t\t\toptions = { name: options };\r\n\t\tif(typeof options !== \"object\" || options === null)\r\n\t\t\tthrow new Error(\"Invalid arguments to tapPromise(options: Object, fn: function)\");\r\n\t\toptions = Object.assign({ type: \"promise\", fn: fn }, options);\r\n\t\tif(typeof options.name !== \"string\" || options.name === \"\")\r\n\t\t\tthrow new Error(\"Missing name for tapPromise\");\r\n\t\tthis._insert(options);\r\n\t}\r\n\r\n\twithOptions(options) {\r\n\t\tconst mergeOptions = opt => Object.assign({}, options, typeof opt === \"string\" ? { name: opt } : opt);\r\n\r\n\t\t// Prevent creating endless prototype chains\r\n\t\toptions = Object.assign({}, this._withOptions);\r\n\t\tconst base = this._withOptionsBase || this;\r\n\t\tconst newHook = Object.create(base);\r\n\r\n\t\tnewHook.tapAsync = (opt, fn) => base.tapAsync(mergeOptions(opt), fn),\r\n\t\tnewHook.tap = (opt, fn) => base.tap(mergeOptions(opt), fn);\r\n\t\tnewHook.tapPromise = (opt, fn) => base.tapPromise(mergeOptions(opt), fn);\r\n\t\tnewHook._withOptions = options;\r\n\t\tnewHook._withOptionsBase = options;\r\n\t\treturn newHook;\r\n\t}\r\n\r\n\tisUsed() {\r\n\t\treturn this.taps.length > 0 || this.interceptors.length > 0;\r\n\t}\r\n\r\n\tintercept(interceptor) {\r\n\t\tthis._resetCompilation();\r\n\t\tthis.interceptors.push(Object.assign({\r\n\t\t\tcall: () => {},\r\n\t\t\tloop: () => {},\r\n\t\t\ttap: tap => tap,\r\n\t\t}, interceptor));\r\n\t}\r\n\r\n\t_resetCompilation() {\r\n\t\tthis.call = this._call;\r\n\t\tthis.callAsync = this._callAsync;\r\n\t\tthis.promise = this._promise;\r\n\t}\r\n\r\n\t_insert(item) {\r\n\t\tthis._resetCompilation();\r\n\t\tlet before;\r\n\t\tif(typeof item.before === \"string\")\r\n\t\t\tbefore = new Set([item.before]);\r\n\t\telse if(Array.isArray(item.before)) {\r\n\t\t\tbefore = new Set(item.before);\r\n\t\t}\r\n\t\tlet stage = 0;\r\n\t\tif(typeof item.stage === \"number\")\r\n\t\t\tstage = item.stage;\r\n\t\tlet i = this.taps.length;\r\n\t\twhile(i > 0) {\r\n\t\t\ti--;\r\n\t\t\tconst x = this.taps[i];\r\n\t\t\tthis.taps[i+1] = x;\r\n\t\t\tconst xStage = x.stage || 0;\r\n\t\t\tif(before) {\r\n\t\t\t\tif(before.has(x.name)) {\r\n\t\t\t\t\tbefore.delete(x.name);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(before.size > 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(xStage > stage) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.taps[i] = item;\r\n\t}\r\n}\r\n\r\nmodule.exports = Hook;\r\n","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\"use strict\";\r\n\r\nexports.notBailing = (options) => {\r\n\tconst args = options.args.join(\", \");\r\n\tconst argsWithCallback = args ? `${args}, _callback` : \"_callback\";\r\n\tconst argsWithComma = args ? `${args}, ` : \"\";\r\n\tconst tap = options.tap;\r\n\tconst type = options.type;\r\n\tswitch(`${tap} ${type}`) {\r\n\t\tcase \"none async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\t_callback();\r\n\t\t\t}`;\r\n\t\tcase \"none promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}`;\r\n\t\tcase \"sync async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis._x(${args});\r\n\t\t\t\t} catch(_e) {\r\n\t\t\t\t\t_callback(_e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_callback();\r\n\t\t\t}`;\r\n\t\tcase \"sync promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve().then(() => {\r\n\t\t\t\t\tthis._x(${args});\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"async async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\tthis._x(${argsWithComma}(_err) => {\r\n\t\t\t\t\tif(_err) {\r\n\t\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_callback();\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"async promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn new Promise((_resolve, _reject) => {\r\n\t\t\t\t\tlet _isSync = true;\r\n\t\t\t\t\tthis._x(${argsWithComma}_err => {\r\n\t\t\t\t\t\tif(_err) {\r\n\t\t\t\t\t\t\tif(_isSync)\r\n\t\t\t\t\t\t\t\tPromise.resolve().then(() => _reject(_err));\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t_reject(_err);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_resolve();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_isSync = false;\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"promise async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\tPromise.resolve(this._x(${args})).then(() => {\r\n\t\t\t\t\t_callback();\r\n\t\t\t\t}, _err => {\r\n\t\t\t\t\t_callback(_err);\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"promise promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve(this._x(${args})).then(() => {});\r\n\t\t\t}`;\r\n\t\tcase \"multiple-sync async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\t_fns[_i](${args});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(_err) {\r\n\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_callback();\r\n\t\t\t}`;\r\n\t\tcase \"multiple-sync promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve().then(() => {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\t_fns[_i](${args});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t}\r\n}\r\n\r\nexports.bailing = (options) => {\r\n\tconst args = options.args.join(\", \");\r\n\tconst argsWithCallback = args ? `${args}, _callback` : \"_callback\";\r\n\tconst argsWithComma = args ? `${args}, ` : \"\";\r\n\tconst tap = options.tap;\r\n\tconst type = options.type;\r\n\tswitch(`${tap} ${type}`) {\r\n\t\tcase \"none async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\t_callback();\r\n\t\t\t}`;\r\n\t\tcase \"none promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}`;\r\n\t\tcase \"sync async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\tlet _result;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t_result = this._x(${args});\r\n\t\t\t\t} catch(_e) {\r\n\t\t\t\t\t_callback(_e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_callback(null, _result);\r\n\t\t\t}`;\r\n\t\tcase \"sync promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn Promise.resolve().then(() => this._x(${args}));\r\n\t\t\t}`;\r\n\t\tcase \"async async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\tthis._x(${argsWithCallback});\r\n\t\t\t}`;\r\n\t\tcase \"async promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn new Promise((_resolve, _reject) => {\r\n\t\t\t\t\tlet _isSync = true;\r\n\t\t\t\t\tthis._x(${argsWithComma}(_err, _result) => {\r\n\t\t\t\t\t\tif(_err) {\r\n\t\t\t\t\t\t\tif(_isSync)\r\n\t\t\t\t\t\t\t\tPromise.resolve().then(() => _reject(_err));\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t_reject(_err);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_resolve(_result);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_isSync = false;\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"promise async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\tPromise.resolve(this._x(${args})).then(_result => {\r\n\t\t\t\t\t_callback(null, _result);\r\n\t\t\t\t}, _err => {\r\n\t\t\t\t\t_callback(_err);\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t\tcase \"promise promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn this._x(${args});\r\n\t\t\t}`;\r\n\t\tcase \"multiple-sync async\":\r\n\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\tconst _result = _fns[_i](${args});\r\n\t\t\t\t\t\tif(_result !== undefined) {\r\n\t\t\t\t\t\t\t_callback(null, _result);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(_err) {\r\n\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_callback();\r\n\t\t\t}`;\r\n\t\tcase \"multiple-sync promise\":\r\n\t\t\treturn `function(${args}) {\r\n\t\t\t\treturn new Promise(_resolve => {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\tconst _result = _fns[_i](${args});\r\n\t\t\t\t\t\tif(_result !== undefined) {\r\n\t\t\t\t\t\t\t_resolve(_result);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_resolve();\r\n\t\t\t\t});\r\n\t\t\t}`;\r\n\t}\r\n}\r\n","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\"use strict\";\r\n\r\nconst Hook = require(\"./Hook\");\r\nconst simpleAsyncCases = require(\"./simpleAsyncCases\");\r\n\r\nclass AsyncParallelHook extends Hook {\r\n\tconstructor(args) {\r\n\t\tsuper(args);\r\n\t\tthis.call = this._call = undefined;\r\n\t}\r\n\r\n\ttemplate(options) {\r\n\t\tconst simpleCase = simpleAsyncCases.notBailing(options);\r\n\t\tif(simpleCase) return simpleCase;\r\n\t\tconst args = options.args.join(\", \");\r\n\t\tconst argsWithCallback = args ? `${args}, _callback` : \"_callback\";\r\n\t\tconst argsWithComma = args ? `${args}, ` : \"\";\r\n\t\tconst tap = options.tap;\r\n\t\tconst type = options.type;\r\n\t\tconst isIntercept = tap == \"intercept\";\r\n\t\tswitch(`${tap} ${type}`) {\r\n\t\t\tcase \"multiple-async async\":\r\n\t\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tlet _remaining = _fns.length;\r\n\t\t\t\t\tconst _handler = (_err) => {\r\n\t\t\t\t\t\tif(_err && _remaining > 0) {\r\n\t\t\t\t\t\t\t_remaining = -1;\r\n\t\t\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(--_remaining === 0) {\r\n\t\t\t\t\t\t\t_callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\t_fns[_i](${argsWithComma}_handler);\r\n\t\t\t\t\t}\r\n\t\t\t\t}`;\r\n\t\t\tcase \"multiple-async promise\":\r\n\t\t\t\treturn `function(${args}) {\r\n\t\t\t\t\treturn new Promise((_resolve, _reject) => {\r\n\t\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\t\tlet _remaining = _fns.length;\r\n\t\t\t\t\t\tconst _handler = (_err) => {\r\n\t\t\t\t\t\t\tif(_err && _remaining > 0) {\r\n\t\t\t\t\t\t\t\t_remaining = -1;\r\n\t\t\t\t\t\t\t\t_reject(_err);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(--_remaining === 0) {\r\n\t\t\t\t\t\t\t\t_resolve();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\t\t_fns[_i](${argsWithComma}_handler);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}`;\r\n\t\t\tcase \"multiple-promise async\":\r\n\t\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\tlet _remaining = _fns.length;\r\n\t\t\t\t\tconst _handler = () => {\r\n\t\t\t\t\t\tif(--_remaining === 0) {\r\n\t\t\t\t\t\t\t_callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst _handlerErr = (_err) => {\r\n\t\t\t\t\t\tif(_remaining > 0) {\r\n\t\t\t\t\t\t\t_remaining = -1;\r\n\t\t\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let _i = 0; _i < _fns.length; _i++) {\r\n\t\t\t\t\t\tPromise.resolve(_fns[_i](${args})).then(_handler, _handlerErr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}`;\r\n\t\t\tcase \"multiple-promise promise\":\r\n\t\t\t\treturn `function(${args}) {\r\n\t\t\t\t\tconst _fns = this._x;\r\n\t\t\t\t\treturn Promise.all(_fns.map(_fn => _fn(${args}))).then(() => {});\r\n\t\t\t\t}`;\r\n\t\t\tcase \"multiple async\":\r\n\t\t\tcase \"intercept async\":\r\n\t\t\t\treturn `function(${argsWithCallback}) {\r\n\t\t\t\t\tconst _taps = this._x;\r\n\t\t\t\t\t${isIntercept ? `const _intercept = this.interceptors;\r\n\t\t\t\t\t\tfor(let _j = 0; _j < _intercept.length; _j++)\r\n\t\t\t\t\t\t\t_intercept[_j].call(${args});\r\n\t\t\t\t\t` : \"\"}\r\n\t\t\t\t\tlet _remaining = _taps.length;\r\n\t\t\t\t\tconst _handler = (_err) => {\r\n\t\t\t\t\t\tif(_err && _remaining > 0) {\r\n\t\t\t\t\t\t\t_remaining = -1;\r\n\t\t\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(--_remaining === 0) {\r\n\t\t\t\t\t\t\t_callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst _handlerSuccess = () => {\r\n\t\t\t\t\t\tif(--_remaining === 0) {\r\n\t\t\t\t\t\t\t_callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst _handlerErr = (_err) => {\r\n\t\t\t\t\t\tif(_remaining > 0) {\r\n\t\t\t\t\t\t\t_remaining = -1;\r\n\t\t\t\t\t\t\t_callback(_err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let _i = 0; _i < _taps.length; _i++) {\r\n\t\t\t\t\t\t${isIntercept ? `let _tap = _taps[_i];\r\n\t\t\t\t\t\tfor(let _j = 0; _j < _intercept.length; _j++)\r\n\t\t\t\t\t\t\t_tap = _intercept[_j].tap(_tap);\r\n\t\t\t\t\t\t` : `const _tap = _taps[_i];`}\r\n\t\t\t\t\t\tswitch(_tap.type) {\r\n\t\t\t\t\t\t\tcase \"sync\":\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t_tap.fn(${args});\r\n\t\t\t\t\t\t\t\t} catch(_err) {\r\n\t\t\t\t\t\t\t\t\t_handlerErr(_err);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_handlerSuccess();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"async\":\r\n\t\t\t\t\t\t\t\t_tap.fn(${argsWithComma}_handler);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"promise\":\r\n\t\t\t\t\t\t\t\tPromise.resolve(_tap.fn(${args})).then(_handlerSuccess, _handlerErr);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}`;\r\n\t\t\tcase \"multiple promise\":\r\n\t\t\tcase \"intercept promise\":\r\n\t\t\t\treturn `function(${args}) {\r\n\t\t\t\t\tconst _taps = this._x;\r\n\t\t\t\t\t${isIntercept ? `const _intercept = this.interceptors;\r\n\t\t\t\t\tfor(let _j = 0; _j < _intercept.length; _j++)\r\n\t\t\t\t\t\t_intercept[_j].call(${args});\r\n\t\t\t\t\t` : \"\"}\r\n\t\t\t\t\tlet _earlyAbort = false;\r\n\t\t\t\t\treturn Promise.all(_taps.map(_tap => {\r\n\t\t\t\t\t\tif(_earlyAbort) return;\r\n\t\t\t\t\t\t${isIntercept ? `for(let _j = 0; _j < _intercept.length; _j++)\r\n\t\t\t\t\t\t\t_tap = _intercept[_j].tap(_tap);\r\n\t\t\t\t\t\t` : \"\"}\r\n\t\t\t\t\t\tswitch(_tap.type) {\r\n\t\t\t\t\t\t\tcase \"sync\":\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t_tap.fn(${args});\r\n\t\t\t\t\t\t\t\t} catch(_err) {\r\n\t\t\t\t\t\t\t\t\t_earlyAbort = true;\r\n\t\t\t\t\t\t\t\t\treturn Promise.reject(_err);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\tcase \"async\":\r\n\t\t\t\t\t\t\t\treturn new Promise((_resolve, _reject) => {\r\n\t\t\t\t\t\t\t\t\t_tap.fn(${argsWithComma}_err => {\r\n\t\t\t\t\t\t\t\t\t\tif(_err) {\r\n\t\t\t\t\t\t\t\t\t\t\t_earlyAbort = true;\r\n\t\t\t\t\t\t\t\t\t\t\t_reject(_err);\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t_resolve();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"promise\":\r\n\t\t\t\t\t\t\t\treturn _tap.fn(${args});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})).then(() => {});\r\n\t\t\t\t}`;\r\n\t\t\t/* istanbul ignore next */\r\n\t\t\tdefault:\r\n\t\t\t\t/* istanbul ignore next */\r\n\t\t\t\tthrow new Error(`Unsupported tap '${tap}' or type '${type}'`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = AsyncParallelHook;\r\n","import Tapable from 'tapable'\n\nexport default class Controller extends Tapable {\n    constructor (_options, _socket) {\n        super()\n        this.options    = _options\n        this.socket     = _socket\n    }\n\n }","export default class Request {\n    constructor (rawRequest = null) {\n        this._messageType = 'req'\n        if (rawRequest === null) {\n            rawRequest = {}\n        }\n        this.meta   = (typeof rawRequest.meta !== 'undefined' && rawRequest.meta !== null ? rawRequest.meta : {})\n        this.data   = (typeof rawRequest.data !== 'undefined' ? rawRequest.data : null)\n        this.id     = (typeof rawRequest.id !== 'undefined' ? rawRequest.id : null)\n        this.type   = (typeof rawRequest.type !== 'undefined' ? rawRequest.type : 'generic')\n    }\n    // setters\n    setData(data) {\n        this.data = data\n        return this\n    }\n    setMeta(key, val) {\n        this.meta[key] = val\n        return this\n    }\n    setId(id) {\n        this.id = id\n        return this\n    }\n    setType(type) {\n        this.type = type\n        return this\n    }\n    // getters\n    getData() {\n        return this.data\n    }\n    getMeta(key, defaultVal = null) {\n        if (typeof this.meta[key] !== 'undefined') {\n            return this.meta[key]\n        }\n        return defaultVal\n    }\n    getId(id) {\n        return this.id\n    }\n    getType(type) {\n        return this.type\n    }\n}","import Request from \"./request\";\n\nexport default class ServiceRequest extends Request {\n    constructor (rawRequest = null) {\n        super(rawRequest)\n        // if blank than we set the service\n        if (rawRequest === null) {\n            this.setType('service')\n        }\n    }\n\n    setServiceName(serviceName) {\n        this.setMeta('serName', serviceName)\n        return this\n    }\n\n    setServiceAction(serviceAction) {\n        this.setMeta('serAction', serviceAction)\n        return this\n    }\n\n    getServiceName() {\n        return this.getMeta('serName')\n    }\n\n    getServiceAction() {\n        return this.getMeta('serAction')\n    }\n}","export default class Response {\n    constructor (rawResponse = {}) {\n        this._messageType = 'res'\n        this.meta = (typeof rawResponse.meta !== 'undefined' && rawResponse.meta !== null ? rawResponse.meta : {})\n        this.data = (typeof rawResponse.data !== 'undefined' ? rawResponse.data : null)\n        this.id = (typeof rawResponse.id !== 'undefined' ? rawResponse.id : null)\n        this.type = (typeof rawResponse.type !== 'undefined' ? rawResponse.type : 'generic')\n        this.statusCode = (typeof rawResponse.statusCode !== 'undefined' ? rawResponse.statusCode : 200)\n        this.statusMessage = (typeof rawResponse.statusMessage !== 'undefined' ? rawResponse.statusMessage : 'success')\n    }\n\n    // setters\n    setData(data) {\n        this.data = data\n        return this\n    }\n    setMeta(key, val) {\n        this.meta[key] = val\n        return this\n    }\n    setId(id) {\n        this.id = id\n        return this\n    }\n    setType(type) {\n        this.type = type\n        return this\n    }\n    ss(code, message = null) {\n        this.statusCode = code\n        this.statusMessage = message\n        return this\n    }\n    ssSuccess(msg = 'success') {\n        this.statusCode = 200\n        this.statusMessage = msg\n        return this\n    }\n    ssClientError(msg = 'Client Error') {\n        this.statusCode = 400\n        this.statusMessage = msg\n        return this\n    }\n    ssClientErrorNotFound(msg = 'Client Error: Not Found') {\n        this.statusCode = 404\n        this.statusMessage = msg\n        return this\n    }\n    ssClientErrorInvalidRequest(msg = 'Client Error: Not Found') {\n        this.statusCode = 404\n        this.statusMessage = msg\n        return this\n    }\n    ssServerError(msg = 'Server Error') {\n        this.statusCode = 500\n        this.statusMessage = msg\n        return this\n    }\n\n    // getters\n    getData() {\n        return this.data\n    }\n    getMeta(key, defaultVal = null) {\n        if (typeof this.meta[key] !== undefined) {\n            return this.meta[key]\n        }\n        return defaultVal\n    }\n    getId(id) {\n        return this.id\n    }\n    getType(type) {\n        return this.type\n    }\n    getStatusCode() {\n        return this.statusCode\n    }\n    getStatusMessage() {\n        return this.statusMessage\n    }\n\n    // checkers\n    isStatusSuccess() {\n        if (this.statusCode >= 200 && this.statusCode <300) {\n            return true;\n        }\n        return false\n    }\n    isStatusError() {\n        if (this.statusCode >= 400 && this.statusCode <600) {\n            return true;\n        }\n        return false\n    }\n}","import Response from \"./response\";\n\nexport default class ServiceResponse extends Response {\n    constructor (rawRequest = {}) {\n        super(rawRequest)\n        this.setType('service')\n    }\n\n    setServiceName(serviceName) {\n        this.setMeta('serName', serviceName)\n        return this\n    }\n\n    setServiceAction(serviceAction) {\n        this.setMeta('serAction', serviceAction)\n        return this\n    }\n\n    getServiceName() {\n        return this.getMeta('serName')\n    }\n\n\n    getServiceAction() {\n        return this.getMeta('serAction')\n    }\n\n\n}","import Controller from './controller'\nimport ServiceRequest from '@vuxtra/shared-core/lib/core/serviceRequest'\nimport ServiceResponse from '@vuxtra/shared-core/lib/core/serviceResponse'\nimport { join, resolve, basename, dirname } from 'path'\nimport _ from 'lodash'\n\nexport default class ServiceController extends Controller {\n    constructor (_options) {\n        super(_options)\n    }\n\n    process (data, res) {\n        let request = new ServiceRequest(data)\n\n        let response = new ServiceResponse()\n        response.setId(request.getId())\n        response.ssSuccess()\n        response.setServiceName(request.getServiceName())\n        response.setServiceAction(request.getServiceAction())\n\n        let type = request.getType()\n\n        if (type === null || type !== 'service' || request.getServiceName() === null) {\n            response.ssClientErrorInvalidRequest()\n            res(null, response)\n            return\n        }\n\n        let absoluteServicePath =  join(this.options.buildDir, 'server', request.getServiceName() + '.js')\n\n        try {\n            let service = require(resolve(absoluteServicePath)).default\n\n            if (typeof service[request.getServiceAction()] === 'undefined' || service[request.getServiceAction()] === null) {\n                response.ssClientErrorNotFound(`service ${request.getServiceName()} does not contain action ${request.getServiceAction()}`)\n                res(null, response)\n                return\n            }\n\n            let ctx = {request, response}\n\n            // here we process it weather is sync or async\n            Promise.resolve(service[request.getServiceAction()].apply(ctx,_.concat(ctx, _.values(request.getData())))).then(result => {\n                response.setData(result)\n                res(null, response)\n            });\n\n        } catch (e) {\n            if (e.code === 'MODULE_NOT_FOUND') {\n                response.ssClientErrorNotFound(`service name ${request.getServiceName()} not found`)\n                res(null, response)\n                return\n            }\n            response.ssServerError(e.message)\n            res(null, response)\n            return\n        }\n    }\n\n}","import Tapable from 'tapable'\nimport AsyncParallelHook from 'tapable/lib/AsyncParallelHook'\nimport _ from 'lodash'\nimport ServiceController from \"./controllers/serviceController\";\n\nexport default class VuxtraServer extends Tapable {\n    constructor (options) {\n        super()\n        // setup available hooks\n        this.hooks = {\n            init: new AsyncParallelHook([\"vuxtraServer\"]),\n            ready: new AsyncParallelHook([\"vuxtraServer\"]),\n            socketConnection: new AsyncParallelHook([\"socket\"])\n        };\n        this.options = options\n        this.socketServer = null\n        this.serviceController = null\n\n    }\n\n    registerSocketServer(socketServer) {\n        // lets make sure proper interface is followed\n\n        if (!_.hasIn(socketServer, [\n                'exchange',\n                'on'\n        ])) {\n            throw Error('Not a valid socket server, make sure your object declares proper interface')\n        }\n        this.socketServer = socketServer\n    }\n\n    run() {\n        this.hooks.init.promise(this);\n        if (this.socketServer === null) {\n            throw Error('SocketServer should be setup and registered first with registerSocketServer')\n        }\n\n        this.socketServer.on('connection',  (socket) => {\n\n            this.hooks.socketConnection.promise(socket);\n\n            this.processServiceRequest(socket)\n\n            var interval = setInterval(function () {\n                socket.emit('rand', {\n                    rand: Math.floor(Math.random() * 5)\n                })\n            }, 1000)\n\n            socket.on('disconnect', function () {\n                clearInterval(interval)\n            })\n        })\n\n        this.hooks.ready.promise(this);\n    }\n\n    processServiceRequest(socket) {\n        // process service calls\n        socket.on('service.call', (data, res) => {\n            if (this.serviceController === null) {\n                this.serviceController = new ServiceController(this.options, socket)\n            }\n\n            this.serviceController.process(data, res)\n        })\n    }\n}","import { resolve, relative, sep } from 'path'\nimport _ from 'lodash'\n\nexport function encodeHtml (str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nexport function getContext (req, res) {\n  return { req, res }\n}\n\nexport function setAnsiColors (ansiHTML) {\n  ansiHTML.setColors({\n    reset: ['efefef', 'a6004c'],\n    darkgrey: '5a012b',\n    yellow: 'ffab07',\n    green: 'aeefba',\n    magenta: 'ff84bf',\n    blue: '3505a0',\n    cyan: '56eaec',\n    red: '4e053a'\n  })\n}\n\nexport async function waitFor (ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, (ms || 0))\n  })\n}\n\nexport function urlJoin () {\n  return [].slice.call(arguments).join('/').replace(/\\/+/g, '/').replace(':/', '://')\n}\n\nexport function isUrl (url) {\n  return (url.indexOf('http') === 0 || url.indexOf('//') === 0)\n}\n\nexport function promisifyRoute (fn) {\n  // If routes is an array\n  if (Array.isArray(fn)) {\n    return Promise.resolve(fn)\n  }\n  // If routes is a function expecting a callback\n  if (fn.length === 1) {\n    return new Promise((resolve, reject) => {\n      fn(function (err, routeParams) {\n        if (err) {\n          reject(err)\n        }\n        resolve(routeParams)\n      })\n    })\n  }\n  let promise = fn()\n  if (!promise || (!(promise instanceof Promise) && (typeof promise.then !== 'function'))) {\n    promise = Promise.resolve(promise)\n  }\n  return promise\n}\n\nexport function sequence (tasks, fn) {\n  return tasks.reduce((promise, task) => promise.then(() => fn(task)), Promise.resolve())\n}\n\nexport function parallel (tasks, fn) {\n  return Promise.all(tasks.map(task => fn(task)))\n}\n\nexport function chainFn (base, fn) {\n  /* istanbul ignore if */\n  if (!(fn instanceof Function)) {\n    return\n  }\n  return function () {\n    if (typeof base !== 'function') {\n      return fn.apply(this, arguments)\n    }\n    let baseResult = base.apply(this, arguments)\n    // Allow function to mutate the first argument instead of returning the result\n    if (baseResult === undefined) {\n      baseResult = arguments[0]\n    }\n    let fnResult = fn.call(this, baseResult, ...Array.prototype.slice.call(arguments, 1))\n    // Return mutated argument if no result was returned\n    if (fnResult === undefined) {\n      return baseResult\n    }\n    return fnResult\n  }\n}\n\nexport function isPureObject (o) {\n  return !Array.isArray(o) && typeof o === 'object'\n}\n\nexport const isWindows = /^win/.test(process.platform)\n\nexport function wp (p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\\\/g, '\\\\\\\\')\n  }\n  return p\n}\n\nexport function wChunk (p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\//g, '\\\\\\\\')\n  }\n  return p\n}\n\nconst reqSep = /\\//g\nconst sysSep = _.escapeRegExp(sep)\nconst normalize = string => string.replace(reqSep, sysSep)\n\nexport function r () {\n  let args = Array.prototype.slice.apply(arguments)\n  let lastArg = _.last(args)\n\n  if (lastArg.includes('@') || lastArg.includes('~')) {\n    return wp(lastArg)\n  }\n\n  return wp(resolve(...args.map(normalize)))\n}\n\nexport function relativeTo () {\n  let args = Array.prototype.slice.apply(arguments)\n  let dir = args.shift()\n\n  // Resolve path\n  let path = r(...args)\n\n  // Check if path is an alias\n  if (path.includes('@') || path.includes('~')) {\n    return path\n  }\n\n  // Make correct relative path\n  let rp = relative(dir, path)\n  if (rp[0] !== '.') {\n    rp = './' + rp\n  }\n  return wp(rp)\n}\n\nexport function flatRoutes (router, path = '', routes = []) {\n  router.forEach((r) => {\n    if (!r.path.includes(':') && !r.path.includes('*')) {\n      /* istanbul ignore if */\n      if (r.children) {\n        flatRoutes(r.children, path + r.path + '/', routes)\n      } else {\n        routes.push((r.path === '' && path[path.length - 1] === '/' ? path.slice(0, -1) : path) + r.path)\n      }\n    }\n  })\n  return routes\n}\n\nexport function cleanChildrenRoutes (routes, isChild = false) {\n  let start = -1\n  let routesIndex = []\n  routes.forEach((route) => {\n    if (/-index$/.test(route.name) || route.name === 'index') {\n      // Save indexOf 'index' key in name\n      let res = route.name.split('-')\n      let s = res.indexOf('index')\n      start = (start === -1 || s < start) ? s : start\n      routesIndex.push(res)\n    }\n  })\n  routes.forEach((route) => {\n    route.path = (isChild) ? route.path.replace('/', '') : route.path\n    if (route.path.indexOf('?') > -1) {\n      let names = route.name.split('-')\n      let paths = route.path.split('/')\n      if (!isChild) {\n        paths.shift()\n      } // clean first / for parents\n      routesIndex.forEach((r) => {\n        let i = r.indexOf('index') - start //  children names\n        if (i < paths.length) {\n          for (let a = 0; a <= i; a++) {\n            if (a === i) {\n              paths[a] = paths[a].replace('?', '')\n            }\n            if (a < i && names[a] !== r[a]) {\n              break\n            }\n          }\n        }\n      })\n      route.path = (isChild ? '' : '/') + paths.join('/')\n    }\n    route.name = route.name.replace(/-index$/, '')\n    if (route.children) {\n      if (route.children.find((child) => child.path === '')) {\n        delete route.name\n      }\n      route.children = cleanChildrenRoutes(route.children, true)\n    }\n  })\n  return routes\n}\n\nexport function createRoutes (files, srcDir) {\n  let routes = []\n  files.forEach((file) => {\n    let keys = file.replace(/^pages/, '').replace(/\\.vue$/, '').replace(/\\/{2,}/g, '/').split('/').slice(1)\n    let route = { name: '', path: '', component: r(srcDir, file) }\n    let parent = routes\n    keys.forEach((key, i) => {\n      route.name = route.name ? route.name + '-' + key.replace('_', '') : key.replace('_', '')\n      route.name += (key === '_') ? 'all' : ''\n      route.chunkName = file.replace(/\\.vue$/, '')\n      let child = _.find(parent, { name: route.name })\n      if (child) {\n        child.children = child.children || []\n        parent = child.children\n        route.path = ''\n      } else {\n        if (key === 'index' && (i + 1) === keys.length) {\n          route.path += (i > 0 ? '' : '/')\n        } else {\n          route.path += '/' + (key === '_' ? '*' : key.replace('_', ':'))\n          if (key !== '_' && key.indexOf('_') !== -1) {\n            route.path += '?'\n          }\n        }\n      }\n    })\n    // Order Routes path\n    parent.push(route)\n    parent.sort((a, b) => {\n      if (!a.path.length || a.path === '/') {\n        return -1\n      }\n      if (!b.path.length || b.path === '/') {\n        return 1\n      }\n      let i = 0\n      let res = 0\n      let y = 0\n      let z = 0\n      const _a = a.path.split('/')\n      const _b = b.path.split('/')\n      for (i = 0; i < _a.length; i++) {\n        if (res !== 0) {\n          break\n        }\n        y = _a[i] === '*' ? 2 : (_a[i].indexOf(':') > -1 ? 1 : 0)\n        z = _b[i] === '*' ? 2 : (_b[i].indexOf(':') > -1 ? 1 : 0)\n        res = y - z\n        // If a.length >= b.length\n        if (i === _b.length - 1 && res === 0) {\n          // change order if * found\n          res = _a[i] === '*' ? -1 : 1\n        }\n      }\n      return res === 0 ? (_a[i - 1] === '*' && _b[i] ? 1 : -1) : res\n    })\n  })\n  return cleanChildrenRoutes(routes)\n}\n","import { cloneDeep } from 'lodash'\nimport { join, resolve } from 'path'\nimport { each } from 'lodash'\nimport { existsSync } from 'fs'\nimport webpack from 'webpack'\nimport nodeExternals from 'webpack-node-externals'\n\nexport default function vuxtraServerConfig (entryFiles) {\n    const nodeModulesDir = join(__dirname, '..', 'node_modules')\n\n    let env = {\n        debug: true\n    }\n    each(this.options.env, (value, key) => {\n        env['process.env.' + key] = (['boolean', 'number'].indexOf(typeof value) !== -1 ? value : JSON.stringify(value))\n    })\n\n  let outputPath = resolve(this.options.buildDir, 'server')\n\n    console.log()\n\n    const config = {\n        name: 'vuxtra-server',\n        target: 'node',\n        node: false,\n        devtool: 'source-map',\n        entry: entryFiles,\n        output: {\n            path: outputPath,\n            filename: '[name].js',\n            chunkFilename: '[name].[chunkhash].js',\n            libraryTarget: 'commonjs2'\n        },\n        performance: {\n            maxEntrypointSize: 1000000,\n            hints: false,\n            maxAssetSize: Infinity\n        },\n        resolve: {\n            extensions: ['.js', '.json', '.ts'],\n            alias: {\n                '~': join(this.options.srcDir),\n                '~~': join(this.options.rootDir),\n                '@': join(this.options.srcDir),\n                '@@': join(this.options.rootDir),\n            },\n            modules: [\n                this.options.modulesDir,\n                nodeModulesDir\n            ]\n        },\n        resolveLoader: {\n            modules: [\n                this.options.modulesDir,\n                nodeModulesDir\n            ]\n        },\n        module: {\n            noParse: /es6-promise\\.js$/, // Avoid webpack shimming process\n            rules: [\n                {\n                    test: /\\.js$/,\n                    loader: 'babel-loader',\n                    exclude: /node_modules/,\n                    options: Object.assign({}, this.babelOptions)\n                },\n            ]\n        },\n        externals: [],\n        plugins: (this.options.build.plugins || []).concat([\n            new webpack.DefinePlugin(Object.assign(env, {\n                debug: true\n            }))\n        ])\n    }\n\n    // Workaround for hiding Warnings about plugins without a default export (#1179)\n    config.plugins.push({\n        apply (compiler) {\n            compiler.plugin('done', stats => {\n                stats.compilation.warnings = stats.compilation.warnings.filter(warn => {\n                    if (warn.name === 'ModuleDependencyWarning' && warn.message.includes(`export 'default'`) && warn.message.includes('plugin')) {\n                        return false\n                    }\n                    return true\n                })\n            })\n        }\n    })\n\n    // https://webpack.js.org/configuration/externals/#externals\n    // https://github.com/liady/webpack-node-externals\n    const moduleDirs = [\n        this.options.modulesDir\n        // Temporary disabled due to vue-server-renderer module search limitations\n        // resolve(__dirname, '..', 'node_modules')\n    ]\n    moduleDirs.forEach(dir => {\n        if (existsSync(dir)) {\n            config.externals.push(nodeExternals({\n                // load non-javascript files with extensions, presumably via loaders\n                whitelist: [/es6-promise|\\.(?!(?:js|json)$).{1,5}$/i],\n                modulesDir: dir\n            }))\n        }\n    })\n\n    // --------------------------------------\n    // Dev specific config\n    // --------------------------------------\n    if (this.options.dev) {\n        //\n    }\n\n    // --------------------------------------\n    // Production specific config\n    // --------------------------------------\n    if (!this.options.dev) {\n        config.plugins.push(\n            new webpack.LoaderOptionsPlugin({\n                minimize: true\n            })\n        )\n    }\n\n    // Clone deep avoid leaking config between Client and Server\n    return cloneDeep(config)\n}\n","import fs, { remove, readFile, writeFile, mkdirp, utimes, existsSync } from 'fs-extra'\nimport Tapable from 'tapable'\nimport chokidar from 'chokidar'\nimport glob from 'glob'\nimport AsyncParallelHook from 'tapable/lib/AsyncParallelHook'\nimport webpack from 'webpack'\nimport { join, resolve, basename, dirname } from 'path'\nimport { r, sequence } from 'nuxt/lib/common/utils'\nimport Exval from 'exval'\n// import MFS from 'memory-fs'\nimport _ from 'lodash'\n\nimport Debug from 'debug'\n\nconst debug = Debug('vuxtra:build')\ndebug.color = 2 // Force green color\n\nimport vuxtraServerWebpackConfig from './webpack/vuxtraServer.config'\n\nexport default class VuxtraBuilder extends Tapable {\n    constructor (_options) {\n        super()\n\n        // setup available hooks\n        this.hooks = {\n            init: new AsyncParallelHook([\"builder\"]),\n            built: new AsyncParallelHook([\"builder\"]),\n            compile: new AsyncParallelHook([\"compiler\"]),\n            pluginDone: new AsyncParallelHook([\"compiler\"]),\n            compileDone: new AsyncParallelHook([\"compiler\"])\n        };\n\n        this.options    = _options\n        this.compiler   = null\n    }\n\n    async build() {\n        debug('...building vuxtraServer')\n        await this.hooks.init.promise(this)\n\n        // Babel options\n        this.babelOptions = _.defaults(this.options.build.babel, {\n            babelrc: false,\n            cacheDirectory: !!this.options.dev\n        })\n        if (!this.babelOptions.babelrc && !this.babelOptions.presets) {\n            this.babelOptions.presets = [\n                require.resolve('babel-preset-vue-app')\n            ]\n        }\n\n        // Check if server dir exists and warn if not\n        if (!fs.existsSync(join(this.options.srcDir, 'server'))) {\n            let dir = this.options.srcDir\n            if (fs.existsSync(resolve(this.options.srcDir, '..', 'server'))) {\n                throw new Error(`No \\`server\\` directory found in ${dir}. Did you mean to run \\`vuxtra\\` in the parent (\\`../\\`) directory?`)\n            } else {\n                throw new Error(`Couldn't find a \\`server\\` directory in ${dir}. Please create one under the project root`)\n            }\n        }\n\n        // lets setup a watcher\n        // this.options.build.watch.push(join(this.options.srcDir, 'server/**/*.js'))\n\n        debug(`App root: ${this.options.srcDir}`)\n        debug(`Generating ${this.options.buildDir} files...`)\n\n        await this.setupBuildDir()\n        await this.buildWebpack()\n\n        await this.hooks.built.promise(this);\n\n    }\n\n    async setupBuildDir() {\n        // Create .vuxtra/, .vuxtra/services and other folders\n        await remove(r(this.options.buildDir))\n        await mkdirp(r(this.options.buildDir, 'server'))\n        if (!this.options.dev) {\n            await mkdirp(r(this.options.buildDir, 'dist'))\n        }\n    }\n\n\n    async generateFiles (entryFiles) {\n        let serviceObj = {}\n        _.forEach(entryFiles, (filePath, path) => {\n\n            let pathSections = _.trim(path, '/').split('/')\n\n            switch (pathSections[0]) {\n                case 'services':\n                    // lets load up file\n\n                    let entryFileObj = {}\n                    let remoteObj = require(join(this.options.buildDir, 'server', _.trimEnd(path,'/')+'.js')).default\n                    _.forIn(remoteObj, (value,key) => {\n                        entryFileObj[key] = path\n                    })\n\n                    // function () {\n                    //     return $_internalService(arguments, this.$__vuxtra_enpoint_options)\n                    // }\n\n                    _.set(serviceObj, _.replace(_.trim(join.apply(null, pathSections.slice(1)), '/'), /\\//g, '.'), entryFileObj)\n                    break\n\n            }\n\n        })\n\n        var templateFn = _.template(`{ <% _.each(model, function(val, index) { %> '<%= index %>' : <% if (_.isObject( val )) { %> <%= templateFn({ model: val, templateFn: templateFn }) %> <% }  else  { %> function () {\n                return $_internalService(arguments, '<%= val %>', '<%= index %>')\n           } <% } %>, <% }); %> }`);\n\n        const fileContent = await readFile(join(__dirname, '../lib/builder/templates/client.js'), 'utf8')\n        const template = _.template(fileContent)\n\n        let exval = new Exval()\n\n        const content = template({\n            serviceObj: templateFn({ model: serviceObj, templateFn: templateFn })\n        })\n\n        let clientPathJs = r(this.options.buildDir, 'clientVuxtra.js')\n        await writeFile(clientPathJs, content, 'utf8')\n\n    }\n\n    async buildWebpack (resetFolders = false) {\n        debug('Building files...')\n        console.log('...compiling vuxtra files')\n        const compilersOptions = []\n\n        if (resetFolders) {\n            await this.setupBuildDir()\n        }\n\n        let entryFiles = glob.sync(`${this.options.srcDir}/server/+(services|models|resources)/**/*.js`).reduce((entries, entry) => Object.assign(entries, {[entry.replace(this.options.srcDir+'/server', '').replace('.js', '')]: entry}), {})\n\n        if (!_.isEmpty(entryFiles)) {\n            // vuxtra default compiler\n            const vuxtraCompilerConfig = vuxtraServerWebpackConfig.call(this, entryFiles)\n            compilersOptions.push(vuxtraCompilerConfig)\n        }\n\n\n        // Simulate webpack multi compiler interface\n        // Separate compilers are simpler, safer and faster\n        this.compiler = { compilers: [] }\n        this.compiler.plugin = (...args) => {\n            this.compiler.compilers.forEach(compiler => {\n                compiler.plugin(...args)\n            })\n        }\n\n        // Initialize shared FS and Cache\n        // const sharedFS = this.options.dev && new MFS()\n        const sharedFS = false // disable shared fs for now\n        const sharedCache = {}\n\n        // Initialize compilers\n        compilersOptions.forEach(compilersOption => {\n            const compiler = webpack(compilersOption)\n            if (sharedFS && !compiler.name.includes('-dll')) {\n                compiler.outputFileSystem = sharedFS\n            }\n            compiler.cache = sharedCache\n            this.compiler.compilers.push(compiler)\n        })\n\n        // Access to compilers with name\n        this.compiler.compilers.forEach(compiler => {\n            if (compiler.name) {\n                this.compiler[compiler.name] = compiler\n            }\n        })\n\n        // Run after each compile\n        this.compiler.plugin('done', async stats => {\n            // Don't reload failed builds\n            /* istanbul ignore if */\n            if (stats.hasErrors()) {\n                return\n            }\n\n            // console.log(stats.toString({ chunks: true }))\n\n            await this.hooks.pluginDone.promise(this);\n        })\n\n        await this.hooks.compile.promise(this);\n\n        // Start Builds\n        await sequence(this.compiler.compilers, compiler => new Promise((resolve, reject) => {\n            if (this.options.dev) {\n                // Build and watch for changes\n\n                compiler.watch(this.options.watchers.webpack, (err) => {\n                    /* istanbul ignore if */\n                    if (err) {\n                        return reject(err)\n                    }\n                    resolve()\n                })\n\n            } else {\n                // --- Production Build ---\n                compiler.run((err, stats) => {\n                    /* istanbul ignore if */\n                    if (err) {\n                        return reject(err)\n                    }\n                    if (err) return console.error(err) // eslint-disable-line no-console\n\n                    // Show build stats for production\n                    console.log(stats.toString(this.webpackStats)) // eslint-disable-line no-console\n\n                    /* istanbul ignore if */\n                    if (stats.hasErrors()) {\n                        return reject(new Error('Webpack build exited with errors'))\n                    }\n                    resolve()\n                })\n            }\n        }))\n\n\n        await this.generateFiles(entryFiles)\n\n        await this.hooks.compileDone.promise(this);\n\n    }\n\n    watchDev() {\n        const patterns = [\n            r(this.options.srcDir, 'server/services/**/*'),\n        ]\n        const options = Object.assign({}, this.options.watchers.chokidar, {\n            ignoreInitial: true\n        })\n        /* istanbul ignore next */\n        const refreshWebpack = _.debounce(() => {\n                console.log('refreshing webpack...')\n                this.buildWebpack()\n            }\n            , 2000\n        )\n\n        const refreshWebpackReset = _.debounce(() => {\n                this.buildWebpack(true)\n            }\n            , 2000\n        )\n\n        // Watch for src Files\n        let filesWatcher = chokidar.watch(patterns, options)\n            .on('add', refreshWebpack)\n            .on('unlink', refreshWebpackReset)\n            .on('change', refreshWebpack)\n\n    }\n}","import express from 'express'\nimport path from 'path'\nimport morgan from 'morgan'\nimport healthChecker from 'sc-framework-health-check'\nimport Debug from 'debug'\nimport { Nuxt, Builder as NuxtBuilder} from 'nuxt'\nimport VuxtraServer from './../vuxtraserver/vuxtraServer'\nimport VuxtraBuilder from './../builder'\nimport _ from 'lodash'\n\nconst debug = Debug('scc-worker:')\ndebug.color = 5\n\n\nmodule.exports.run = function (worker) {\n    debug('   >> Worker PID:', process.pid)\n    var environment = worker.options.environment\n\n    var app = express()\n\n    var httpServer = worker.httpServer\n    var scServer = worker.scServer\n\n    process.on('unhandledRejection', (reason, p) => {\n        //console.log('Unhandled Rejection at: Promise', p, 'reason:', reason);\n        worker.sendToMaster({type: 'error', subtype: 'worker', e:p, message: reason})\n    });\n\n    if (environment == 'dev') {\n        // Log every HTTP request. See https://github.com/expressjs/morgan for other\n        // available formats.\n        app.use(morgan('dev'))\n    }\n\n    // Import and Set vuxtra and nuxt options\n    let config = worker.options.__full_deep_temp_options\n\n    if (!_.isArray(config.nuxt.modules)) {\n        config.nuxt.modules = []\n    }\n\n    // main vuxtra module\n    config.nuxt.modules.push(\n        {\n            src:  '@vuxtra/nuxt-client-module/lib/index',\n            options: config\n        })\n\n    if (!_.isArray(config.nuxt.build)) {\n        config.nuxt.build = []\n\n        if (!_.isArray(config.nuxt.build.templates)) {\n            config.nuxt.build.templates = []\n        }\n    }\n\n    config.nuxt.build.templates.push('./.vuxtra/clientVuxtra.js')\n\n    // Init Nuxt.js\n    const nuxt = new Nuxt(config.nuxt)\n    console.log('config.nuxt', nuxt)\n\n    let builderPromise = new Promise((resolve, reject) => {\n\n        // Build only in dev mode\n        if (config.vuxtra.dev) {\n            const vuxtraBuilder = new VuxtraBuilder(config.vuxtra)\n            vuxtraBuilder.build().then(() => {\n                worker.sendToMaster({type: 'event', subtype: 'vuxtraBuilt', message: 'Vuxtra has been built'})\n                vuxtraBuilder.watchDev()\n                // Build only in dev mode\n                if (config.nuxt.dev) {\n                    const nuxtBuilder = new NuxtBuilder(nuxt)\n                    nuxtBuilder.build().then(() => {\n                        worker.sendToMaster({type: 'event', subtype: 'nuxtBuilt', message: 'nuxt has been built'})\n                        resolve('true')\n                    })\n                }\n            }).catch((e) => {\n                worker.sendToMaster({type: 'error', subtype: 'builders', 'e':e, message: e.message})\n                reject(e)\n            })\n        }\n        else {\n            resolve(true)\n        }\n\n    })\n\n    builderPromise.then(() => {\n\n        // Give nuxt middleware to express\n        app.use(nuxt.render)\n\n        // Add GET /health-check express route\n        healthChecker.attach(worker, app)\n        httpServer.on('request', app)\n\n        var count = 0\n\n        let vuxtraServer = new VuxtraServer(config.vuxtra)\n\n        // lets register current socket with vuxtraServer\n        vuxtraServer.registerSocketServer(scServer)\n        // lets run it\n        vuxtraServer.run()\n\n        worker.sendToMaster({type: 'event', subtype: 'vuxtraStarted', message: 'vuxtra has started'})\n\n    })\n\n}\n"],"names":["Hook","Controller","Tapable","_options","_socket","options","socket","ServiceController","data","res","request","ServiceRequest","response","ServiceResponse","setId","getId","ssSuccess","setServiceName","getServiceName","setServiceAction","getServiceAction","type","getType","ssClientErrorInvalidRequest","absoluteServicePath","join","buildDir","service","require","resolve","default","ssClientErrorNotFound","ctx","Promise","apply","_","concat","values","getData","then","result","setData","e","code","ssServerError","message","VuxtraServer","hooks","AsyncParallelHook","socketServer","serviceController","hasIn","Error","init","promise","on","socketConnection","processServiceRequest","interval","setInterval","emit","Math","floor","random","ready","process","sep","vuxtraServerConfig","entryFiles","nodeModulesDir","__dirname","env","value","key","indexOf","JSON","stringify","outputPath","log","config","Infinity","srcDir","rootDir","modulesDir","Object","assign","babelOptions","build","plugins","webpack","DefinePlugin","push","compiler","plugin","stats","compilation","warnings","filter","warn","name","includes","moduleDirs","forEach","dir","existsSync","externals","nodeExternals","dev","LoaderOptionsPlugin","cloneDeep","debug","Debug","color","VuxtraBuilder","defaults","babel","babelrc","presets","fs","setupBuildDir","buildWebpack","built","remove","r","mkdirp","serviceObj","filePath","path","pathSections","trim","split","entryFileObj","remoteObj","trimEnd","forIn","set","replace","slice","templateFn","template","fileContent","readFile","exval","Exval","content","model","clientPathJs","writeFile","resetFolders","compilersOptions","glob","sync","reduce","entries","entry","isEmpty","vuxtraCompilerConfig","vuxtraServerWebpackConfig","call","compilers","args","sharedFS","sharedCache","compilersOption","outputFileSystem","cache","hasErrors","pluginDone","compile","sequence","reject","watch","watchers","err","run","console","error","toString","webpackStats","generateFiles","compileDone","patterns","chokidar","refreshWebpack","debounce","refreshWebpackReset","filesWatcher","module","exports","worker","pid","environment","app","express","httpServer","scServer","reason","p","sendToMaster","subtype","use","morgan","__full_deep_temp_options","isArray","nuxt","modules","templates","Nuxt","builderPromise","vuxtra","vuxtraBuilder","watchDev","nuxtBuilder","NuxtBuilder","catch","render","attach","vuxtraServer","registerSocketServer"],"mappings":"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"}